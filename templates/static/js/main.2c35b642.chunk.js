(this.webpackJsonpgrandpybot=this.webpackJsonpgrandpybot||[]).push([[0],{25:function(e,t,a){e.exports=a(69)},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),c=a.n(s),o=a(24),l=a(2),u=a(3),i=a.n(u),m=a(5),p=a.n(m),d=a(23),g=a.n(d),v=r.a.createContext({apiKey:null,updateApiKey:null}),f=function(e){var t=e.message,a=Object(n.useContext)(v),s="Me"!==t.user?{image:r.a.createElement("img",{src:"https://image.flaticon.com/icons/png/512/2115/2115916.png",alt:"grandpybot"}),class:""}:{image:"",class:"message-personal"},c="";return"position"in t&&(c=function(e,t){var a={lng:Number(e.lng.toFixed(3)),lat:Number(e.lat.toFixed(3))};return r.a.createElement("div",{style:{width:"400px",height:"50vh"}},r.a.createElement(g.a,{bootstrapURLKeys:{key:t,language:"fr"},options:{mapTypeControl:!1,scrollwheel:!1,panControl:!1},defaultCenter:a,defaultZoom:15},r.a.createElement((function(e){var t=e.text;return r.a.createElement("div",{className:"pin bounce"},t,r.a.createElement("div",{className:"pulse"}))}),{lat:e.lat,lng:e.lng})))}(t.position,a.apiKey),a.updateApiKey("")),r.a.createElement("div",{className:"message new ".concat(s.class)},r.a.createElement("figure",{className:"avatar"},s.image),c,t.text,r.a.createElement("div",{className:"timestamp"},t.hour),r.a.createElement("div",{className:"checkmark-read"},"\u2713\u2713"))},h=r.a.createContext({conversation:null,updateConversation:null}),E=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useContext)(h),o=Object(n.useContext)(v);return r.a.createElement("div",{className:"message-box"},r.a.createElement("form",{className:"message-input",onSubmit:function(e){e.preventDefault();var t=a;c.updateConversation({user:"Me",text:t}),i.a.post("/askbot",{message:t}).then((function(e){var t=e.data.description,a=e.data.address,n=e.data.position;if(a){var r={user:"GrandPY",text:a};n&&(r.position={lng:n.lng,lat:n.lat},o.updateApiKey()),c.updateConversation(r)}c.updateConversation({user:"GrandPY",text:t})})).catch((function(e){return console.log(e)})),document.querySelector(".message-input").reset()}},r.a.createElement("input",{onChange:function(e){var t=e.currentTarget.value;s(t)},type:"text",className:"message-input",placeholder:"Ask your question...",required:!0}),r.a.createElement("button",{type:"submit",className:"message-submit"},"Send")))},b=function(){var e=Object(n.useContext)(h);return r.a.createElement("section",{className:"avenue-messenger"},r.a.createElement("div",{className:"agent-face"},r.a.createElement("div",{className:"half"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{className:"agent circle",src:"https://image.flaticon.com/icons/png/512/2115/2115916.png",alt:"grandpy bot"})))),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat-title"},r.a.createElement("h1",null,"GrandPy"),r.a.createElement("h2",null,"Bot")),r.a.createElement("div",{className:"messages"},e.conversation.map((function(e){return r.a.createElement(f,{key:e.id,message:e})}))),r.a.createElement(E,null)))},y=function(){var e=Object(n.useState)([{id:1,user:"GrandPY",text:"Bonjour ! Bienvenue sur GrandPY Bot, pose une question relative \xe0 un lieu.",hour:"Now"}]),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),u=Object(l.a)(c,2),m=u[0],d=u[1],g={conversation:a,updateConversation:function(e){var t=a;p.a.locale("fr");var n=p()().format("LT");e.hour=n,e.id=Math.round(1e5*Math.random()),t.push(e),s(Object(o.a)(t))}},f={apiKey:m,updateApiKey:function(){i.a.get("/get_google_key").then((function(e){return d(e.data.key)})).catch((function(e){return console.log(e)}))}};return Object(n.useEffect)((function(){document.querySelector(".message:nth-last-child(1)").scrollIntoView(!0)})),r.a.createElement(h.Provider,{value:g},r.a.createElement(v.Provider,{value:f},r.a.createElement(b,null)))};c.a.render(r.a.createElement(y,null),document.querySelector("#root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.2c35b642.chunk.js.map